<html><head><link rel="import" href="../polymer/polymer.html">

<script>Polymer.NeonPageBehavior={properties:{selectedPage:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,readOnly:!0},overlayPage:{type:Boolean,value:!1},backgroundPage:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,readOnly:!0},backgroundPageShowsSharedElements:{type:Boolean,value:!1},_wasBackgroundPage:{type:Boolean,value:!1,readOnly:!0},_defaultAnimationConfig:{type:Object,value:{},readOnly:!0},_defaultSharedElements:{type:Object,value:{},readOnly:!0},_neonPageBehaviorInitialized:{type:Boolean,value:!1,readOnly:!0},_originalZindex:{type:String,value:"initial",readOnly:!0}},attached:function(){"neon-animated-pages"===this.parentElement.localName&&(this._boundPageChangedHandler=this._pageChanged.bind(this),this._boundTransitionFinishedHandler=this._transitionFinished.bind(this),this.parentElement.addEventListener("selected-item-changed",this._boundPageChangedHandler),this.parentElement.addEventListener("neon-animation-finish",this._boundTransitionFinishedHandler))},detached:function(){"neon-animated-pages"===this.parentElement.localName&&(this.parentElement.removeEventListener("selected-item-changed",this._boundPageChangedHandler),this.parentElement.removeEventListener("neon-animation-finish",this._boundTransitionFinishedHandler))},_getAnimationConfigForPage:function(e){var t=this._normalizePageValue(e);return t?this._getAttributeCaseInsensitive("animationConfig"+t)||this._defaultAnimationConfig:this._defaultAnimationConfig},_getSharedElementsForPage:function(e,t){var i=this._normalizePageValue(e);if(!i)return this._defaultSharedElements;var n="sharedElements"+i,a=t?"Entry":"Exit";return this._getAttributeCaseInsensitive(n+a)||this._getAttributeCaseInsensitive(n)||this._defaultSharedElements},_getPageValue:function(e){var t;return e&&(t=this.parentElement.attrForSelected?this.parentElement._valueForItem(e):this.parentElement.indexOf(e)),this._safeToString(t)},_safeToString:function(e){return void 0!==e&&null!==e?e.toString():void 0},_pageChanged:function(e){if(Polymer.dom(e).rootTarget===this.parentElement&&this.parentElement.selectedItem){var t,i,n=null,a=this._getPageValue(this),s=this._safeToString(this.parentElement._prevSelected),o=this.parentElement._valueToItem(this.parentElement.selected),r=o===this;this._neonPageBehaviorInitialized||(this._set_defaultAnimationConfig(this.animationConfig),this._set_defaultSharedElements(this.sharedElements)),!r&&o&&o.overlayPage||(this.toggleClass("iron-selected",r),this._set_wasBackgroundPage(this.backgroundPage),this._setBackgroundPage(!1),this._toggleSharedElementsVisibility(this._prevSharedElements,!0)),r?(this._setSelectedPage(!0),i="entry-animation-start",n=s,t=this.parentElement._valueToItem(n),this._setUpAnimationConfig(n),this._wasBackgroundPage&&this._toggleSharedElementsVisibility(this.sharedElements,!0),this.overlayPage&&!this._wasBackgroundPage&&this._applyOverlayZIndex(),this._neonPageBehaviorInitialized||this.parentElement.animateInitialSelection||this.async(function(){this._fireNeonPageEvent("entry-animation-finish",void 0,void 0,a,this)},1)):this.selectedPage&&(this._setSelectedPage(!1),i="exit-animation-start",n=this._safeToString(this.parentElement.selected),t=o,this._setUpAnimationConfig(n),t&&t.overlayPage&&!this.overlayPage&&(this.toggleClass("iron-selected",!0),this._setBackgroundPage(!0))),this._set_neonPageBehaviorInitialized(!0),i&&this._fireNeonPageEvent(i,this.selectedPage?n:a,this.selectedPage?t?t:void 0:this,this.selectedPage?a:n,this.selectedPage?this:t?t:void 0)}},_transitionFinished:function(e){var t;e.detail.toPage===this?t="entry-animation-finish":e.detail.fromPage===this&&(t="exit-animation-finish",this.backgroundPage&&this._toggleSharedElementsVisibility(this.sharedElements,!1)),!this.overlayPage||e.detail.toPage===this||this.backgroundPage||e.detail.fromPage!==this&&!this._wasBackgroundPage||this._removeOverlayZIndex(),t&&(this._fireNeonPageEvent(t,this._getPageValue(e.detail.fromPage),e.detail.fromPage,this._getPageValue(e.detail.toPage),e.detail.toPage),this._restoreDefaultAnimationConfig()),this._set_wasBackgroundPage(!1)},_fireNeonPageEvent:function(e,t,i,n,a){var s={animationConfig:this.animationConfig,sharedElements:this.sharedElements,from:t===n?void 0:t,fromPage:i===a?void 0:i,to:n,toPage:a};this.fire(e,s,{bubbles:!1})},_setUpAnimationConfig:function(e){(e||"undefined"==typeof e)&&(this.animationConfig=this._getAnimationConfigForPage(e),this.sharedElements=this._prevSharedElements=this._getSharedElementsForPage(e,this.selectedPage))},_restoreDefaultAnimationConfig:function(){this.animationConfig=this._defaultAnimationConfig,this.sharedElements=this._defaultSharedElements},_toggleSharedElementsVisibility:function(e,t){if(e&&!this.backgroundPageShowsSharedElements)for(var i in e)e.hasOwnProperty(i)&&e[i]&&e[i].style&&(e[i].style.visibility=t?"":"hidden")},_applyOverlayZIndex:function(){this._set_originalZindex(this.style.zIndex),this.parentElement.hasOwnProperty("_neonPageOverlayZIndex")||(this.parentElement._neonPageOverlayZIndex=1001),this.style.zIndex=this.parentElement._neonPageOverlayZIndex++},_removeOverlayZIndex:function(){this.style.zIndex=this._originalZindex,this.parentElement._neonPageOverlayZIndex--},_normalizePageValue:function(e){return e?e.replace(/[^.0-9a-z_$]+/gi,""):""},_getAttributeCaseInsensitive:function(e){var t=(e+"").toLowerCase();for(var i in this)if(this.hasOwnProperty(i)&&t==(i+"").toLowerCase())return this[i]}};</script>
</head><body></body></html>