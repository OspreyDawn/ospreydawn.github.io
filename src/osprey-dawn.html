<html><head><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">

<link rel="import" href="od-portrait.html">
<link rel="import" href="hero-pager.html">
<link rel="import" href="grey-box-work.html">
<link rel="import" href="grey-box-thoughts.html">

</head><body><dom-module id="osprey-dawn">
  <template>

    <style>
      :host {
        @apply(--layout-fullbleed);
        overflow: hidden;
      }
      #orientOverlay {
        display: none;
      }
      #loadOverlay {
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 1;
        background-color: white;
      }
      @media (max-width: 750px) and (orientation:landscape) {
        neon-animated-pages {
          position: relative;
          z-index: 0;
        }
        #orientOverlay {
          display: block;
          background: white;
          position: absolute;
          z-index: 1;
          width: 100%;
          height: 100%;
          @apply(--layout-horizontal);
          @apply(--layout-center-center);
        }
      }
    </style>

    <od-portrait id="portrait" query="{{mediaQuery}}"></od-portrait>

    <neon-animated-pages id="pages" attr-for-selected="id" selected="{{selected}}" on-neon-animation-finish="pageChanged">

      <hero-pager id="hero" query="{{mediaQuery}}"></hero-pager>
      <grey-box-work id="work" query="{{mediaQuery}}"></grey-box-work>
      <grey-box-thoughts id="thoughts" query="{{mediaQuery}}"></grey-box-thoughts>

    </neon-animated-pages>
    <div id="orientOverlay"><p>Please rotate to Portrait to view this website</p></div>
    <div id="loadOverlay"></div>

  </template>

  <script>Polymer({is:"osprey-dawn",properties:{prop1:{type:String,value:"osprey-dawn"},mediaQuery:{type:String,value:"max-width: 450px"},selected:{type:String},indexSelector:{value:0},pageIndex:{type:Array},indexLength:{value:0}},listeners:{wheel:"wheelFire","to-about":"aboutPressed","to-hero":"backPressed","change-page":"pageDestiny","show-hero":"pageDestiny","show-work":"pageDestiny","show-thoughts":"pageDestiny"},ready:function(){for(var e=[],t=0;t<this.$.pages.children.length;++t)e.push(this.$.pages.children[t].id);this.pageIndex=e,this.indexLength=this.pageIndex.length,this.selected=this.pageIndex[this.indexSelector],window.addEventListener("WebComponentsReady",function(e){return function(){e.$.loadOverlay.style.display="none"}}(this))},pageDestiny:function(e){0===this.indexSelector&&this.$.portrait.downSlide(),0===e.detail.targetIndex&&this.$.portrait.upSlide(),this.indexSelector=e.detail.targetIndex,this.selected=this.pageIndex[this.indexSelector]},translateWheel:function(e){if(0==e.deltaMode)return e;var t=16*e.deltaY,i=new WheelEvent("newWheel",{deltaY:t,deltaMode:0});return i},wheelFire:function(e){var t=this.translateWheel(e),i=t.deltaY,n=this.indexSelector;if(16<i&&this.indexSelector<this.indexLength-1)++n;else{if(!(i<-16&&this.indexSelector>0))return;--n}(16<i||i<-16)&&(this.fire("change-page",{targetIndex:n}),this.unlisten(this,"wheel","wheelFire"))},pageChanged:function(){this.listen(this,"wheel","wheelFire"),this.fire("page-changed",{targetIndex:this.indexSelector})},aboutPressed:function(){this.unlisten(this,"wheel","changePage"),this.$.portrait.aboutSlide()},backPressed:function(){this.listen(this,"wheel","changePage"),this.$.portrait.heroSlide()}});</script>
</dom-module>
</body></html>