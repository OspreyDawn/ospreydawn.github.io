<html><head><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">

<link rel="import" href="od-portrait.html">
<link rel="import" href="hero-pager.html">
<link rel="import" href="grey-box-work.html">
<link rel="import" href="grey-box-thoughts.html">

</head><body><dom-module id="osprey-dawn">
  <template>

    <style>
      :host {
        @apply(--layout-fullbleed);
        overflow: hidden;
      }
      #orientOverlay {
        display: none;
      }
      #loadOverlay {
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 1;
        background-color: white;
      }
      @media (max-width: 750px) and (orientation:landscape) {
        neon-animated-pages {
          position: relative;
          z-index: 0;
        }
        #orientOverlay {
          display: block;
          background: white;
          position: absolute;
          z-index: 1;
          width: 100%;
          height: 100%;
          @apply(--layout-horizontal);
          @apply(--layout-center-center);
        }
      }
    </style>

    <od-portrait id="portrait" query="{{mediaQuery}}"></od-portrait>

    <neon-animated-pages id="pages" attr-for-selected="id" selected="{{selected}}" on-neon-animation-finish="pageChanged">

      <hero-pager id="hero" query="{{mediaQuery}}"></hero-pager>
      <grey-box-work id="work" query="{{mediaQuery}}"></grey-box-work>
      <grey-box-thoughts id="thoughts" query="{{mediaQuery}}"></grey-box-thoughts>

    </neon-animated-pages>
    <div id="orientOverlay"><p>Please rotate to Portrait to view this website</p></div>
    <div id="loadOverlay"></div>

  </template>

  <script>Polymer({is:"osprey-dawn",properties:{prop1:{type:String,value:"osprey-dawn"},mediaQuery:{type:String,value:"max-width: 450px"},selected:{type:String},selectedNum:{value:0},selectedValues:{type:Array}},listeners:{wheel:"changePage","to-about":"aboutPressed","to-hero":"backPressed","show-hero":"toHero","show-work":"toWork","show-thoughts":"toThoughts"},ready:function(){for(var e=[],t=0;t<this.$.pages.children.length;++t)e.push(this.$.pages.children[t].id);this.selectedValues=e,this.selected=this.selectedValues[this.selectedNum],window.addEventListener("WebComponentsReady",function(e){return function(){e.$.loadOverlay.style.display="none"}}(this))},translateWheel:function(e){if(0==e.deltaMode)return e;var t=16*e.deltaY,s=new WheelEvent("newWheel",{deltaY:t,deltaMode:0});return s},changePage:function(e){var t=this.translateWheel(e),s=t.deltaY,i=this.selectedValues.length;16<s&&this.selectedNum<i-1?(0===this.selectedNum&&this.$.portrait.downSlide(),this.selected=this.selectedValues[++this.selectedNum],this.unlisten(this,"wheel","changePage")):s<-16&&0<this.selectedNum&&(1===this.selectedNum&&this.$.portrait.upSlide(),this.selected=this.selectedValues[--this.selectedNum],this.unlisten(this,"wheel","changePage"))},toHero:function(){this.selectedNum=0,this.selected=this.selectedValues[this.selectedNum],this.$.portrait.upSlide()},toWork:function(){0===this.selectedNum&&this.$.portrait.downSlide(),this.selectedNum=1,this.selected=this.selectedValues[this.selectedNum]},toThoughts:function(){0===this.selectedNum&&this.$.portrait.downSlide(),this.selectedNum=2,this.selected=this.selectedValues[this.selectedNum]},aboutPressed:function(){this.unlisten(this,"wheel","changePage"),this.$.portrait.aboutSlide()},backPressed:function(){this.listen(this,"wheel","changePage"),this.$.portrait.heroSlide()},pageChanged:function(){this.listen(this,"wheel","changePage")}});</script>
</dom-module>
</body></html>