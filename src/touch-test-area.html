<html><head><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">

</head><body><dom-module id="touch-test-area">
  <template>
    <style>
      .container {
        width: 100%;
        height: 100%;
        position: relative;
        @apply(--layout-vertical);
      }
      #touchArea {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        z-index: -1;
        @apply(--layout-vertical);
        @apply(--layout-wrap);
      }
    </style>

    <div class="container" id="container">
      <content></content>
      <div id="touchArea"></div>
    </div>

  </template>

  <script>Polymer({is:"touch-test-area",behaviors:[Polymer.NeonAnimationRunnerBehavior],properties:{animationConfig:{value:function(){return[]}}},listeners:{"container.track":"handleTrack","made-grid":"pageGen","neon-animation-finish":"_onNeonAnimationFinish"},viewWidth:0,threshold:0,xPos:0,xRelease:0,indexSelector:0,indexLength:0,ready:function(){window.addEventListener("made-grid",function(e){return function(t){e.pageGen(e.$.touchArea,t)}}(this))},pageGen:function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);for(this.viewWidth=t.detail.width,this.indexLength=t.detail.length,i=0;i<this.indexLength;i++){var n=document.createElement("div");n.style.width=this.viewWidth+"px",n.style.height="100%",e.appendChild(n)}},handleTrack:function(e){switch(e.detail.state){case"start":this.xPos=e.detail.x;break;case"track":e.currentTarget.style.left=e.detail.x-this.xPos+"px";break;case"end":this.xRelease=e.detail.x-this.xPos,this.snapElement(e.currentTarget),this.xPos=0}},keyGen:function(e,t,i,n){this.animationConfig.translate={name:"transform-animation",node:e,transformFrom:"translateX("+t+"px)",transformTo:"translateX("+i+"px)",timing:{duration:n}},this.xEnd=i},execAnim:function(e,t,i){switch(indexInit=this.indexSelector,distance=this.viewWidth,t){case"next":this.indexSelector++;break;case"prev":this.indexSelector--;break;default:this.indexSelector}i?(currentPosition=this.xRelease-distance*indexInit,duration=150):(currentPosition=-1*(distance*indexInit),duration=500),nextPosition=distance*this.indexSelector,this.xEnd=-nextPosition,this.keyGen(e,currentPosition,-nextPosition,duration),this.playAnimation("translate"),this.fire("item-page-changed",{vector:t,indexSelector:this.indexSelector})},snapElement:function(e){var t=null;this.xRelease<-this.threshold&&this.indexSelector<this.indexLength-1?t="next":this.xRelease>this.threshold&&this.indexSelector>0&&(t="prev"),e.style.left="auto",this.execAnim(e,t,!0)},_onNeonAnimationFinish:function(){this.$$(".container").style.transform="translateX("+this.xEnd+"px)"}});</script>
</dom-module>
</body></html>